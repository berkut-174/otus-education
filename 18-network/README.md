# Разворачиваем сетевую лабораторию

## Задание

### Теоретическая часть

1. Найти свободные подсети
2. Посчитать сколько узлов в каждой подсети, включая свободные
3. Указать broadcast адрес для каждой подсети
4. Проверить нет ли ошибок при разбиении

### Практическая часть

1. Соединить офисы в сеть согласно схеме и настроить роутинг
2. Все сервера и роутеры должны ходить в инет через inetRouter
3. Все сервера должны видеть друг друга
4. У всех новых серверов отключить дефолт на нат (eth0), который вагрант поднимает для связи
5. При нехватке сетевых интерфейсов добавить по несколько адресов на интерфейс

Формат сдачи ДЗ — vagrant + ansible.

## Структура стенда

`Vagrantfile` — файл базовой конфигурации виртуального стенда

`provisioning/*` — файлы конфигурации для настройки стенда с помощью ansible

## Решение

### Теоретическая часть

Расчёты выполнялись с помощью онлайн калькулятора подсетей.

| Name            | IP                                | Netmask         | Broadcast      | Hosts | Free |
| --------------- | --------------------------------- | --------------- | -------------- | ----- | ---- |
| router-net      | 192.168.255.1<br />192.168.255.2  | 255.255.255.252 | 192.168.255.3  | 2     | 0    |
| dir-net         | 192.168.0.1<br />192.168.0.2      | 255.255.255.240 | 192.168.0.15   | 14    | 12   |
| hw-net          | 192.168.0.33                      | 255.255.255.240 | 192.168.0.47   | 14    | 13   |
| mgt-net         | 192.168.0.65                      | 255.255.255.192 | 192.168.0.127  | 62    | 61   |
| office1-central | 192.168.255.9<br />192.168.255.10 | 255.255.255.252 | 192.168.255.11 | 2     | 0    |
| office2-central | 192.168.255.5<br />192.168.255.6  | 255.255.255.252 | 192.168.255.7  | 2     | 0    |
| dev1-net        | 192.168.2.1                       | 255.255.255.192 | 192.168.2.63   | 62    | 61   |
| test1-net       | 192.168.2.65                      | 255.255.255.192 | 192.168.2.127  | 62    | 61   |
| managers-net    | 192.168.2.129<br />192.168.2.130  | 255.255.255.192 | 192.168.2.191  | 62    | 60   |
| dev2-net        | 192.168.1.1<br />192.168.1.2      | 255.255.255.128 | 192.168.1.127  | 126   | 124  |
| test2-net       | 192.168.1.129                     | 255.255.255.192 | 192.168.1.191  | 62    | 61   |

### Практическая часть

На хостовой системе необходимо установить:

- ansible
- python3-netaddr

Запуск стенда: `vagrant up`
